#pragma once

#include <vector>
#include "DataTypes.h" // Assuming this contains your Brick struct
#include "btBulletDynamicsCommon.h" // Include for btDiscreteDynamicsWorld, btCollisionShape, btDefaultMotionState, btRigidBody

class World {
public:
    // Default constructor (NEW)
    World();
    // Constructor to inject the physics world
    World(btDiscreteDynamicsWorld* dynamicsWorld);

    // Destructor to clean up physics shapes and motion states created by this World
    ~World();

    void GenerateSimplePlatform(); // Renamed from GeneratePlatform
    const std::vector<Brick>& GetBricks() const;

    // Added Clear function for safe world regeneration
    void Clear();

private:
    std::vector<Brick> bricks;
    btDiscreteDynamicsWorld* physicsWorld; // Pointer to the physics world
    std::vector<btCollisionShape*> collisionShapes; // To manage shapes created by World
    std::vector<btDefaultMotionState*> motionStates; // To manage motion states created by World
    std::vector<btRigidBody*> rigidBodies; // To manage rigid bodies created by World
};